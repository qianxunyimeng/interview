# 手撕代码系列


## 1. 深度拷贝deepClone

```js

export function deepClone(target: any, map = new WeakMap()) {
  if (object || typeof object == "object") {
    // 克隆之前，先判断数据是否克隆过
    const cache = map.get(target);
    if (cache) {
      return cache;
    }
    // 创建目标容器
    const isArr: boolean = Array.isArray(target);
    const result: any = isArr ? [] : {};
    // 对已经克隆过的对象做缓存
    map.set(target, result);
    if (isArr) {
      target.forEach((item: any, index: number) => {
        result[index] = deepClone(item, map);
      });
    } else {
      Object.keys(target).forEach(key => {
        result[key] = deepClone(target[key], map);
      });
    }
    return result;
  }
  return target;
}
```