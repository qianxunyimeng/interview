# TOPESC 数据安全管理

## 1. AF_CLI 脚手架

### 1.1 背景

因部门架构调整，前端技术体系从Vue向Angular迁移,部门新架构采用微前端的方式，上级部门规划出一套规范，要求所有前端项目必须按照该规范进行开发。由于Angular天然支持Monorepo单仓库模式，架构师决定把项目的每一个一级菜单拆分成一个模块单元。每次创建新的模块单元都需要修改angular.json，修改模块对应的builder、styles、customWebpackConfig等配置项，还要在package.json增加启动和打包的指令，过于繁琐。AF_CLI应运而生，实现create、start、build子指令集。内置一套项目模板，快速创建新模块单元，执行创建指令后，会自动修改angular.json、package.json，解决代码不统一、不规范、不标准的问题，提高开发效率。启动和打包指令以可视化界面形式展示，选择启动和打包的子模块，方便前端和后端人员使用。同时打包指令有一个部署的可选项，如果配置了该参数，在打包完成后会自动部署到对应的服务器，af-cli会读取该项目下的af-cli.config.json文件，根据配置文件中的参数进行部署。

### 1.2 技术栈

- commander ^10.0.0
- inquirer ^7.3.3
- -ejs ^3.1.5
- dotenv ^16.0.3
- user-home ^3.0.0
- ssh2 ^1.14.0
- ssh2-sftp-client ^9.1.0
- fs-extra ^9.0.1

## 2. TOPDSM_LIB 组件库

### 2.1 背景

用了公司自己的组件库TUI，经过一段时间的使用，有的表单组件在模板驱动表单下工作良好，在响应式表单下存在问题，需要对其二次封装。还有就是各个项目模块单元之间存在大量重复的代码，如公共函数、功能性组件。项目在不同分支下也存在着重复的组件代码，为了减少复制粘贴的次数，提高开发效率，实现代码复用，决定开发一个组件库。由于之前了解过ant design,决定采用ng-zorro作为组件库的基础框架,下载源码，阅读源码，学习源码的实现方式，结合公司业务需求，对ng-zorro部分组件进行源码修改，使其符合部门的UI规范和部门自己的组件库风格保持统一。还有就是添加了一些自己封装的组件，后来又参考了@delon/form 动态表单组件库，对齐添加了部门自己的表单widget组件。

### 2.2 技术栈

- angular 12
- jsoneditor 9.10.0
- ajv ^8.10.0
- ajv-formats ^2.1.1